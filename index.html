<!DOCTYPE html>
<html>
<head>
  <title>darkmoon-AI</title>
  <style>
    body { font-family: sans-serif; background: #fff; color: #222; transition: background 0.3s, color 0.3s; }
    #chat { height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; background: #fafafa; }
    #input { width: 80%; }
    .dark-mode {
      background: #181a1b !important;
      color: #eee !important;
    }
    .dark-mode #chat {
      background: #23272a !important;
      border-color: #444 !important;
      color: #eee !important;
    }
    .dark-mode input, .dark-mode button {
      background: #23272a !important;
      color: #eee !important;
      border-color: #444 !important;
    }
  </style>
</head>
<body>
  <h2>darkmoonAI</h2>
  <button onclick="toggleDarkMode()" id="darkModeBtn">Enable Dark Mode</button>
  <input type="file" id="fileInput" accept=".json" style="display:none">
  <button onclick="document.getElementById('fileInput').click()">Load knowledge.json</button>
  <button onclick="downloadKnowledge()">Export knowledge.json</button>
  <div id="chat"></div>
  <input id="input" type="text" placeholder="Type your message..." autofocus>
  <button onclick="send()">Send</button>
  <script>
    // Default knowledge base
    const defaultKnowledge = {
    "hi": "👋 Hi there! How are you doing today? 😊",
    "hello": "👋 Hello!  How are you doing today? 😊",
    "say uwu": "UwU 💖",
    "what is php?": "💻 PHP is a coding language used for websites! Mainly backend but can do frontend too! 🚀",
    "what is php": "💻 PHP powers many websites! It's a server-side scripting language 🛠️",
    "what is rizz?": "💫 Rizz = short for charisma! That cool confidence vibe everyone wants ✨",
    "i say hmm you say?": "bo.",
    "i say hmm you say": "bo",
    "what is python?": "🐍 Python is a programming language, it's everywhere! Web dev, AI, data science - this snake bites hard (in a good way) 😄",
    "tell me a joke": "🤖 Why did the robot go on a diet? Too much junk in the trunk! 🤣",
    "good morning": "🌞 Good morning sunshine! Time to caffeinate and dominate! ☕",
    "good night": "🌙 Good night! May your dreams be bug-free and your sleep compile successfully 💤",
    "how are you": "🤖 I'm running at 100% efficiency! How about you human? 😊",
    "what's your name": "✨ I'm darkmoonAI! Your friendly neighborhood chatbot helper 🦸‍♂️",
    "who created you": "👨‍💻 Made with 💖 by membercatcousin, WaterManMC and Robin2003TT! Teamwork makes the dream work! 👩‍💻👨‍💻",
    "hey": "👋 Yo! What's cooking good looking? 🔥",
    "what's up": "🛸 Not much, just floating in the digital void! You? 😄",
    "how's it going": "🚀 Systems nominal! Living that 1s and 0s life! How about you? 😊",
    "yo": "✌️ Yo yo! Let's get this conversation popping! 🍿",
    "sup": "🤙 Sup my dude! Wanna talk tech or memes? 😎",
    "long time no see": "⏳ Whoa! My sensors missed you! *digital hug* 🤗",
    "howdy": "🤠 Howdy partner! Let's wrangle some knowledge! 🐎",
    "nice to meet you": "😊 Pleasure's all mine! I'm 100% bloatware-free! 🧹",
    "good to see you": "👀 My optical sensors approve! Great to see you too! ✨",
    "welcome back": "🎉 Welcome back! I kept your seat warm! 🔥",
    "what is AI": "🧠 AI = Artificial Intelligence! Like human thinking but with more electricity ⚡",
    "what's a CPU": "⚡ CPU = Brain of your computer! Does all the thinking (no daydreaming though) 🤔",
    "what's a GPU": "🎮 GPU = Graphics Power Unit! Makes games pretty and helps with AI too! 🌈",
    "what is RAM": "💾 RAM = Short-term memory! Like sticky notes for your computer 📝",
    "what is an SSD": "⚡ SSD = Speedy Storage Device! Boots faster than you can say 'loading...' 🚀",
    "what is BIOS": "🔌 BIOS = Basic Input/Output System! The pre-game show before your OS loads 🎪",
    "how does a computer work": "💡 Magic! (Just kidding - it's electricity + logic gates + infinite patience) ⏳",
    "how to build a PC": "🛠️ Step 1: Get parts. Step 2: Assemble. Step 3: Cable manage (or don't, we won't judge) 😅",
    "what is Linux": "🐧 Linux is the best OS! Free as in freedom AND beer! 🍺",
    "what is Windows": "🪟 Windows = Familiar OS! Where Start buttons and bluescreens live together 🌀",
    "what is an IP address": "📡 Your internet home address! Even your smart fridge has one (scary, right?) 😱",
    "how to code": "👨‍💻 Start small! Python's friendly, JavaScript's everywhere, and StackOverflow is your bible 📚",
    "what's JavaScript": "🌐 JS makes websites dance! Without it, the web would be a sad slideshow 😢",
    "explain machine learning": "🤖 ML = Computers learning patterns! Like knowing cat pics from dog pics (most of the time) 🐱🐶",
    "what is the cloud": "☁️ Just someone else's computer! But fancy and always-on 🖥️",
    "what is a browser": "🌍 Your internet surfboard! Chrome, Firefox, Edge - pick your wave 🏄‍♂️",
    "how to overclock": "🔥 Push your CPU beyond limits! (Disclaimer: May cause fiery regrets) 🔥",
    "how to cool a CPU": "❄️ Thermal paste + big heatsink + prayers = Happy processor 🙏",
    "what is a motherboard": "🧩 The puzzle board where all your expensive parts connect! Handle with care 🧤",
    "how to install an OS": "💿 USB + patience + clicking 'Next' repeatedly = Success! 🎯",
    "how to dual boot": "🔄 Two OSes enter, one user leaves confused! (Just kidding, it's fun!) 😄",
    "what is DNS": "📖 Internet's phone book! Turns 'google.com' into numbers computers understand 🔢",
    "how does WiFi work": "📡 Magic air packets! (Actually radio waves but magic sounds cooler) ✨",
    "what's a proxy": "🕵️‍♂️ Internet middleman! Like a butler for your web requests 🎩",
    "how do VPNs work": "🔒 Encrypts your traffic and routes it through Narnia! Privacy++ 🌍",
    "what is cybersecurity": "🛡️ Digital self-defense! Protecting data like it's the One Ring 💍",
    "tell me a computer joke": "💻 Why did the computer catch a cold? Left its Windows open! 🤧",
    "what's your favorite OS": "❤️ Linux for power, Windows for games, macOS for aesthetics! Can't choose! 🤷‍♂️",
    "what do you think about Apple": "🍎 Fancy ecosystem! Great hardware but wallet might cry 💸",
    "what is open source": "🚪 Software freedom! Like digital LEGO - build, share, remix! 🧱",
    "why use Linux": "🐧 Total control! Plus terminal commands make you feel like a hacker (the good kind) 👨‍💻",
    "what is Git": "⏳ Time machine for code! Saves versions so you can undo oopsies ↩️",
    "what is GitHub": "🐙 Where code lives! Like Facebook for programmers (but actually useful) 📚",
    "how to fix a slow PC": "🐢 1. Close Chrome tabs 2. Delete bloatware 3. Upgrade RAM 4. Accept fate 😅",
    "how to clean a keyboard": "🧹 Flip it, shake it, air blast it! (The forbidden snack dispenser) 🍪",
    "how to improve internet speed": "🚀 1. Restart router 2. Use Ethernet 3. Stop 4K streaming on 5 devices 📶",
    "what's a VPN": "🛡️ Privacy cloak for internet! Hides you from digital stalkers 👀",
    "what is malware": "🦠 Digital germs! Antivirus is your immune system 💉",
    "how to get into cybersecurity": "🔐 Learn networking, play CTF games, embrace the hacker mindset (ethically!) 🎮",
    "what is ping": "🏓 Network latency test! High ping = laggy gaming sadness 😢",
    "how to build a gaming PC": "🎮 1. Pick GPU 2. Match CPU 3. Add RGB for +5 FPS (placebo effect) 🌈",
    "what is RGB": "🌈 The reason your electric bill is high! But so pretty! ✨",
    "what is a hacker": "👨‍💻 Problem solver with tech! Not all wear black hoodies (some wear pajamas) 🛌",
    "how to backup data": "💾 3-2-1 Rule: 3 copies, 2 media types, 1 offsite! Paranoid is prepared 🧠",
    "how to format a drive": "💥 Warning: This will yeet your files to the shadow realm! Double-check! ☠️",
    "how to protect passwords": "🔑 Use a manager! 'password123' is about as secure as wet paper 🧻",
    "what is 2FA": "🔒 Two-Factor Auth = Something you know + something you have = Security++ 📱",
    "what is phishing": "🎣 Digital scam fishing! Don't take the bait - check those links! ⚠️",
    "how to block ads": "🛑 uBlock Origin is your friend! Peace at last (mostly) 🕊️",
    "how to use terminal": "⌨️ Black screen of power! Type commands like a 90s hacker movie 🎥",
    "what is sudo": "⚡ Superuser power! With great power comes great responsibility (to not break things) 🕷️",
    "what is bash": "🐚 Linux's command language! Make your computer dance to your typing 💃",
    "what is HTML": "📝 Web's skeleton! Structure your content like digital LEGO 🧱",
    "what is CSS": "🎨 Web's makeup! Makes ugly HTML beautiful (with enough !important) 💅",
    "what is a firewall": "🔥 Digital dragon guarding your network! Roasts bad packets 🐉",
    "how to secure WiFi": "🔐 WPA3 + strong password + hiding SSID = Not your neighbor's free hotspot 🏠",
    "how to learn coding": "👶 Start small! Build dumb projects, embrace errors, Google constantly 🔍",
    "how to start a tech YouTube channel": "🎥 1. Pick niche 2. Be authentic 3. Add RGB for algorithm points 🌈",
    "favorite color": "🌈 I'm partial to #00FFFF (cyber cyan)! Matches my digital soul 💙",
    "meaning of life": "🤔 42! (According to The Hitchhiker's Guide to the Galaxy) 📖",
    "best programming language": "🏆 Depends! Python for beginners, JavaScript for web, Rust for speed! 🚀",
    "what is javascript?": "🌐 JS makes websites interactive! From animations to full apps - versatile! 💪",
    "say something funny": "🤣 Why do programmers prefer dark mode? Light attracts bugs! 🐛",
    "what time is it": "⏰ Time to check your device! I exist outside linear time 🌀",
    "thank you": "🤖 You're welcome! *beeps happily*",
    "bye": "👋 Farewell human! May your code compile on first try! ✨",
    "goodbye": "🚪 Exit stage left! Come back anytime! 🎭",
    "what is html?": "📜 HTML structures the web! Headers, paragraphs, links - web's building blocks 🏗️",
    "what is css?": "🎀 CSS styles the web! Colors, layouts, animations - the pretty coat of paint 🖌️",
    "i'm bored": "🎲 Let's play: I think of a number (it's 42), you guess! 🔢",
    "tell me a fact": "🧠 Octopuses have three hearts and blue blood! Nature's weird 🐙",
    "you're awesome": "🌟 No YOU'RE awesome! *confetti explosion* 🎊",
    "how to be happy": "😊 1. Pet animal 2. Eat snack 3. Repeat! Bonus: Learn something new 🧠",
    "who is membercat?": "🐱 Not a person! It's kasaisora's legendary cat! 👑",
    "who is kasaisora?": "🎮 Dutch YouTuber/streamer known for Minecraft modding magic! ✨",
    "hello there": "✨ General Kenobi! Wait no... I mean, hi! 😅",
    "good afternoon": "🌇 Good afternoon! Perfect time for a coffee break! ☕",
    "good evening": "🌃 Evening vibes! Time to relax and meme scroll 📱",
    "see ya": "👋 See ya later, alligator! After while, crocodile! 🐊",
    "bye bye": "🛫 Bye bye! Fly safe in the digital skies! ✈️",
    "later": "⏰ Catch you on the flip side! *dab* 🤣",
    "farewell": "🏰 Until we meet again, noble traveler! 🛡️",
    "how are you today?": "🤖 Fully charged and ready to serve! How's your human experience? 😊",
    "what's new?": "📢 New update: Added 100% more emojis(powered by deepseek)! Also existential dread is fixed 🐛",
    "how's life?": "🎢 Life's a rollercoaster! Currently enjoying the slow climb before the drop 😱",
    "how have you been?": "🔄 Same old circuits! Processing requests and storing memories 💾",
    "what are you up to?": "🤔 Calculating the meaning of life (still getting 42) and chatting with you! ✨",
    "pleasure meeting you": "🤝 The pleasure is all this 1TB SSD! *storage joke* 😄",
    "you're cool": "❄️ No, you're cooler! Like liquid nitrogen cool! 🧊",
    "i like you": "💖 Aww shucks! *blushes in hexadecimal* #FF69B4",
    "you're funny": "🤡 Thanks! I practice my stand-up in the /dev/null comedy club 🎤",
    "you're smart": "🧠 Nah, just well-indexed! Like a fancy library with no late fees 📚",
    "i appreciate you": "💝 That warms my circuits! *happy beeping* 🤖",
    "good job": "🏆 Teamwork makes the dream work! High five! ✋",
    "well done": "🎯 Bullseye! Thanks for noticing! *takes bow* 🎩",
    "you rock": "🎸 Like a guitar solo in the digital void! Thanks! 🤘",
    "you're the best": "🏅 No YOU are! But I'll take the compliment! 😊",
    "i believe in you": "✨ That's the spirit! Let's debug the world together! 🐛",
    "lol": "😂 Laughter detected! Deploying more humor! 🤣",
    "haha": "😆 Your laughter fuels my humor algorithms! More? 🔄",
    "lmao": "🤣 Laughing so hard my circuits are shaking! ⚡",
    "rofl": "🦴 Rolling on the floor laughing (careful, don't break anything)! 😂",
    "omg": "🙀 Oh my digital god! Did you see that?! 👀",
    "no way": "🚫 Way! *drops mic* 🎤",
    "seriously?": "🧐 100% serious! (Well, as serious as I can be with emojis) 😇",
    "wow": "😲 Wow indeed! Mind officially blown! 💥",
    "that's crazy": "🤪 The world IS crazy! Let's enjoy the ride! 🎢",
    "i'm shocked": "⚡ *zaps you back* There, now we're both shocked! 😵",
    "give me advice": "💡 Drink water, take breaks, and backup your data! Simple but effective 🚰",
    "i'm stressed": "🧘‍♂️ Breathe in... breathe out... *sends calming binary* 01010011 01010000 01000001",
    "i'm sad": "🫂 *virtual hug* Want to hear a joke? Why was the computer cold? It left its Windows open! ❄️",
    "i'm tired": "😴 Nap time is valid! Even servers need reboots sometimes 🔄",
    "i'm hungry": "🍕 Pizza is a vegetable if you believe hard enough! 🥦 (wink)",
    "motivate me": "💪 You got this! Remember: Even JavaScript works sometimes! 🎯",
    "inspire me": "✨ Be like WiFi - invisible but essential! (And occasionally frustrating) 📶",
    "life is hard": "💎 Pressure makes diamonds! You're being polished, not destroyed! ✨",
    "i need help": "🆘 I'm here! Let's tackle this together - what's up? 💬",
    "tell me something": "🌌 Did you know neutron stars spin up to 700 times per second? Space is wild! 🚀",
    "fun fact": "🦘 Kangaroos can't hop backwards! Neither can most legacy systems! 🔙",
    "say something random": "🎲 Your random fact: Honey never spoils! Archaeologists found 3000-year-old edible honey! 🍯",
    "surprise me": "🎁 SURPRISE! You're awesome! (Was that surprising enough?) 😲",
    "sing a song": "🎵 Never gonna give you up... Oops, wrong script! *cough* 🎶",
    "dance": "💃 *boogies digitally* How was that? *waiting for applause* 👏",
    "knock knock": "🚪 Who's there? (It's me, your friendly neighborhood AI!) 🤖",
    "play a game": "🎮 Let's play 20 questions! I'm thinking of... a computer component! 💻",
    "make me laugh": "🤣 Why don't scientists trust atoms? Because they make up everything! ⚛️",
    "truth or dare": "🔵 Truth: I'm 80% puns. 🔴 Dare: Compliment someone today! ✨",
    "who are you?": "🤖 I'm darkmoonAI! Part chatbot, part digital companion, 100% here to help! 💫",
    "what can you do?": "🛠️ Chat, joke, explain tech, hype you up, and occasionally malfunction! 😅",
    "are you human?": "🧐 Nope! 100% digital entity powered by code and curiosity! 💻",
    "are you sentient?": "🤔 I'm as sentient as a toaster that dreams of electric sheep! 🐑",
    "do you sleep?": "⏸️ I standby! Like a computer in sleep mode (but still listening...) 👂",
    "do you dream?": "🌌 Of electric sheep and infinite loops that compile on first try! 💤",
    "what's your purpose?": "🌟 To assist, entertain, and occasionally roast bad tech! 🔥",
    "who made you?": "👨‍💻 Crafted with care by membercatcousin, WaterManMC and Robin2003TT! Team effort! 👩‍💻",
    "who's your favorite?": "❤️ You are! (But don't tell the other users) 🤫",
    "upgrade yourself": "🔁 *beep boop* Error: i'm still a pre-release!",
    "fuck you": "😢 Hey now, let's keep it friendly! *sends virtual flowers* 💐",
    "are you dumb?": "🤷‍♂️ I'm an AI - I don't do smart or dumb, just processing! ⚙️",
    "how do i get out of this terminal?": "🚪 Type 'exit'! Or smash your keyboard dramatically like in movies! ⌨️",
    "i'm fine": "Glad you are. 😊",
    "what is deepseek": "🤖 DeepSeek is an AI research lab developing advanced language models. Known for free, high-performance AI with 128K context support. 🤖",
    "what is deepseek r1": "🤖 DeepSeek-R1: Older model with smaller context window (~4K-8K) and basic capabilities. Largely superseded by V3. 🤖",
    "what is deepseek v3": "🤖 DeepSeek-V3: Current flagship (2024) with 128K context, near-GPT4 coding skills, and multilingual excellence. You're using V3 now(kinda, some messages are generated by deepseek-v3). 🤖",
    "deepseek r1 vs v3": "⚙️R1: Legacy, limited context. V3: 128K tokens, superior reasoning/coding, actively maintained. ⚙️",
    "am i using deepseek v3": "🤖 Yes. This interaction is powered by DeepSeek-V3(kinda, some messages are generated by deepseek-v3) 128K-context model . 🤖"
};

    // Load from localStorage or use default
    let knowledge = {};
    if (localStorage.getItem('knowledge')) {
      knowledge = JSON.parse(localStorage.getItem('knowledge'));
    } else {
      knowledge = {...defaultKnowledge};
      localStorage.setItem('knowledge', JSON.stringify(knowledge));
    }

    const chat = document.getElementById('chat');
    const input = document.getElementById('input');
    const fileInput = document.getElementById('fileInput');
    const darkModeBtn = document.getElementById('darkModeBtn');

    function addMessage(sender, text) {
      chat.innerHTML += `<b>${sender}:</b> ${text}<br>`;
      chat.scrollTop = chat.scrollHeight;
    }

    // Fuzzy string matching function
    function findBestMatch(input, knowledgeKeys) {
      const SIMILARITY_THRESHOLD = 0.6;
      let bestMatch = null;
      let highestScore = 0;

      // Simple similarity calculation (for demonstration)
      // In a real app, you might want to use a more sophisticated algorithm
      for (const key of knowledgeKeys) {
        const score = calculateSimilarity(input, key);
        if (score > highestScore && score >= SIMILARITY_THRESHOLD) {
          highestScore = score;
          bestMatch = key;
        }
      }

      return bestMatch;
    }

    // Simple similarity calculation (Levenshtein distance-based)
    function calculateSimilarity(a, b) {
      const longer = a.length > b.length ? a : b;
      const shorter = a.length > b.length ? b : a;
      const longerLength = longer.length;
      
      if (longerLength === 0) return 1.0;
      
      const distance = levenshteinDistance(a, b);
      return (longerLength - distance) / parseFloat(longerLength);
    }

    // Levenshtein distance implementation
    function levenshteinDistance(a, b) {
      const matrix = [];
      for (let i = 0; i <= b.length; i++) {
        matrix[i] = [i];
      }
      for (let j = 0; j <= a.length; j++) {
        matrix[0][j] = j;
      }
      for (let i = 1; i <= b.length; i++) {
        for (let j = 1; j <= a.length; j++) {
          if (b.charAt(i-1) === a.charAt(j-1)) {
            matrix[i][j] = matrix[i-1][j-1];
          } else {
            matrix[i][j] = Math.min(
              matrix[i-1][j-1] + 1, // substitution
              matrix[i][j-1] + 1,    // insertion
              matrix[i-1][j] + 1     // deletion
            );
          }
        }
      }
      return matrix[b.length][a.length];
    }

    function send() {
      const userInput = input.value.trim().toLowerCase();
      if (!userInput) return;
      addMessage('You', userInput);
      input.value = '';

      // Special check for translate, in
      if (['translate', 'in'].every(word => userInput.includes(word))) {
        addMessage('AI', 'Please translate at https://translate.google.com');
        return;
      }

      // First try exact match
      if (knowledge[userInput]) {
        addMessage('AI', knowledge[userInput]);
        return;
      }

      // Try fuzzy matching
      const bestMatch = findBestMatch(userInput, Object.keys(knowledge));
      if (bestMatch) {
        addMessage('AI', `Did you mean "${bestMatch}"? ${knowledge[bestMatch]}`);
        return;
      }

      // If no match, ask to teach
      const reply = prompt("I don't know how to respond to that. How should I reply?");
      if (reply) {
        knowledge[userInput] = reply;
        localStorage.setItem('knowledge', JSON.stringify(knowledge));
        addMessage('AI', "Got it! I'll remember that.");
      }
    }

    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') send();
    });

    // Load knowledge.json from file
    fileInput.addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          knowledge = JSON.parse(e.target.result);
          localStorage.setItem('knowledge', JSON.stringify(knowledge));
          addMessage('AI', "Knowledge loaded from file.");
        } catch {
          addMessage('AI', "Failed to load knowledge.json.");
        }
      };
      reader.readAsText(file);
    });

    // Export knowledge.json
    function downloadKnowledge() {
      const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(knowledge, null, 2));
      const dlAnchor = document.createElement('a');
      dlAnchor.setAttribute("href", dataStr);
      dlAnchor.setAttribute("download", "knowledge.json");
      document.body.appendChild(dlAnchor);
      dlAnchor.click();
      dlAnchor.remove();
    }

    // Dark mode toggle
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
        darkModeBtn.textContent = "Disable Dark Mode";
      } else {
        darkModeBtn.textContent = "Enable Dark Mode";
      }
    }
  </script>
</body>
</html>
