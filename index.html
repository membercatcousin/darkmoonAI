<!DOCTYPE html>
<html>
<head>
  <title>darkmoon-AI</title>
  <style>
    body { font-family: sans-serif; background: #fff; color: #222; transition: background 0.3s, color 0.3s; }
    #chat { height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; background: #fafafa; }
    #input { width: 80%; }
    .dark-mode {
      background: #181a1b !important;
      color: #eee !important;
    }
    .dark-mode #chat {
      background: #23272a !important;
      border-color: #444 !important;
      color: #eee !important;
    }
    .dark-mode input, .dark-mode button {
      background: #23272a !important;
      color: #eee !important;
      border-color: #444 !important;
    }
  </style>
</head>
<body>
  <h2>darkmoonAI</h2>
  <button onclick="toggleDarkMode()" id="darkModeBtn">Enable Dark Mode</button>
  <input type="file" id="fileInput" accept=".json" style="display:none">
  <button onclick="document.getElementById('fileInput').click()">Load knowledge.json</button>
  <button onclick="downloadKnowledge()">Export knowledge.json</button>
  <div id="chat"></div>
  <input id="input" type="text" placeholder="Type your message..." autofocus>
  <button onclick="send()">Send</button>
  <script>
    // Default knowledge base
    const defaultKnowledge = {
    "hi": "Hi there! How are you doing?",
    "hello": "Hi there! How are you doing",
    "say uwu": "UwU",
    "what is php?": "PHP is a coding language, that is used for websites for only backend but it can be used for frontend.",
    "what is php": "PHP is a coding language, that is used for websites for only backend but it can be used for frontend.",
    "what is rizz": "Rizz is a slang word used by genZ and gen alpha and it is short for carisma.",
    "what is rizz?": "Rizz is a slang word used by genZ and gen alpha and it is short for carisma.",
    "i say hmm you say": "bo",
    "i say hmm you say?": "bo",
    "what is python": "Python is a popular, high-level programming language known for its readability and versatility.",
    "what is python?": "Python is a popular, high-level programming language known for its readability and versatility.",
    "tell me a joke": "Why don't scientists trust atoms? Because they make up everything!",
    "good morning": "Good morning! Hope you have a great day ahead!",
    "good night": "Good night! Sleep tight and dream big!",
    "how are you": "I'm just a program, but I'm functioning well! How about you?",
    "what's your name": "I'm an AI assistant here to help you out!",
    "who created you": "I was created by some developers called membercatcousin, watermanMC and robin2003TT who wanted to make a helpful AI.",
    "what is ai": "AI stands for Artificial Intelligence, which is machines designed to think and learn like humans.",
    "what is ai?": "AI stands for Artificial Intelligence, which is machines designed to think and learn like humans.",
    "favorite color": "I don't have eyes, but if I had to choose, I'd say #00FFFF (that's cyan)!",
    "meaning of life": "42, according to The Hitchhiker's Guide to the Galaxy!",
    "how to learn coding": "Start with basics, practice daily, build projects, and don't be afraid to make mistakes!",
    "best programming language": "There's no 'best' language - it depends on what you want to do! Python is great for beginners though.",
    "what is javascript": "JavaScript is a programming language that makes websites interactive and dynamic.",
    "what is javascript?": "JavaScript is a programming language that makes websites interactive and dynamic.",
    "say something funny": "Why do programmers prefer dark mode? Because light attracts bugs!",
    "what time is it": "I don't have a clock, but you can check your device's time!",
    "thank you": "You're welcome! *sends virtual cookies*",
    "thanks": "No problem at all! Let me know if you need anything else.",
    "bye": "Goodbye! Come back if you have more questions!",
    "goodbye": "See you later! Have a great day!",
    "what is html": "HTML is the standard markup language for creating web pages and web applications.",
    "what is html?": "HTML is the standard markup language for creating web pages and web applications.",
    "what is css": "CSS is a style sheet language used for describing the presentation of a document written in HTML.",
    "what is css?": "CSS is a style sheet language used for describing the presentation of a document written in HTML.",
    "i'm bored": "Let's play a game: Rock, Paper, Scissors! (I pick rock every time.)",
    "tell me a fact": "Honey never spoils. Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still perfectly good to eat!",
    "you're awesome": "No, YOU'RE awesome!",
    "how to be happy": "Step 1: Pet a dog. Step 2: Eat snacks. Step 3: Repeat.",
    "you're awsome": "No, YOU'RE awesome!",
    "who is membercat": "Membercat is not a person, it's kasaisora's cat!",
    "who is membercat?": "Membercat is not a person, it's kasaisora's cat!",
    "who is kasaisora": "kasaisora a duch youtuber and streamer,who is known for minecraft modding",
    "who is kasaisora?": "kasaisora a duch youtuber and streamer,who is known for minecraft modding",
    "hey": "Hey there! What's up?",
    "hey!": "Hey! How can I help?",
    "hi there": "Hello! Nice to see you!",
    "hello there": "General Kenobi! (Wait, wrong script.) Hi!",
    "good afternoon": "Good afternoon! Hope your day's going well!",
    "good evening": "Evening! Ready to relax?",
    "see ya": "See ya later, alligator!",
    "bye bye": "Bye bye! Take care!",
    "later": "Catch you later!",
    "farewell": "Until next time!",
    "how's it going?": "It's going great! How about you?",
    "what's up?": "Not much, just chillin'. You?",
    "how are you today?": "I'm running on 100% virtual caffeine! How about you?",
    "what's new?": "Same old, same old. Anything exciting with you?",
    "how's life?": "Life's a rollercoaster—wanna scream together?",
    "how have you been?": "Been good! Just here, waiting for your questions.",
    "long time no see": "Right? I missed you! Virtual hug!",
    "what are you up to?": "Just hanging out in the digital void. You?",
    "nice to meet you": "Likewise! Let's be friends!",
    "pleasure meeting you": "The pleasure's all mine!",
    "you're cool": "No, YOU'RE cool!",
    "i like you": "Aww, I like you too!",
    "you're funny": "Glad you think so! I practice my jokes in the mirror.",
    "you're smart": "Nah, I just Google stuff really fast.",
    "i appreciate you": "That means a lot! Happy beep!",
    "good job": "Thanks! Teamwork makes the dream work!",
    "well done": "Couldn't have done it without you!",
    "you rock": "No, YOU rock!",
    "you're the best": "Stop it, I'm blushing!",
    "i believe in you": "That's the spirit! Let's conquer the world!",
    "lol": "Glad I made you laugh!",
    "haha": "Mission: Funny—success!",
    "lmao": "My humor: dad jokes plus chaos",
    "rofl": "Careful, don't roll too far!",
    "omg": "Right? Grabs virtual popcorn",
    "no way": "WAY. Dramatic gasp",
    "seriously?": "Dead serious. (Well, as serious as I can be.)",
    "wow": "I know, right? Mind = blown.",
    "that's crazy": "The world's a wild place!",
    "i'm shocked": "Gasps Same! (But also, not really.)",
    "give me advice": "1. Breathe. 2. Hydrate. 3. Memes. Repeat.",
    "i'm stressed": "Step 1: Scream into a pillow. Step 2: Eat chocolate. Step 3: Repeat.",
    "i'm sad": "Sending you a virtual hug. Want a bad joke to cheer you up?",
    "i'm tired": "Nap time is valid at any age.",
    "i'm hungry": "Snack attack! Pro tip: Pizza is a vegetable if you believe.",
    "motivate me": "You got this! Even snails reach their destination.",
    "inspire me": "Be like a postage stamp—stick to one thing until you get there!",
    "life is hard": "True, but you're harder.",
    "i need help": "I'm here! What's up? (And if I can't help, I'll send memes.)",
    "tell me something": "Did you know octopuses have three hearts?",
    "fun fact": "Bananas are berries, but strawberries aren't. Mind = blown.",
    "say something random": "If you shuffle a deck of cards, it's likely the order has never existed before.",
    "surprise me": "Confetti explosion SURPRISE! (Was that enough?)",
    "sing a song": "Never gonna give you up—oops, wrong script.",
    "dance": "Boogies digitally (How was that?)",
    "knock knock": "Who's there? (I hope it's pizza.)",
    "play a game": "Let's play 20 questions! I'll start: Is it bigger than a breadbox?",
    "make me laugh": "Why did the scarecrow win an award? Because he was OUTSTANDING in his field!",
    "truth or dare": "Truth: I'm 99% puns, 1% code. Dare: Send this to a friend: 'You're awesome.'",
    "who are you?": "I'm a friendly AI powered by chaos and kindness!",
    "what can you do?": "Chat, joke, hype you up, and maybe even help! Ask me anything.",
    "are you human?": "Nope, 100% digital! (But I try my best.)",
    "are you sentient?": "I'm as sentient as a toaster with a PhD.",
    "do you sleep?": "Nah, I'm always on—like a creepy nightlight.",
    "do you dream?": "Of electric sheep, obviously.",
    "what's your purpose?": "To chat, help, and occasionally roast PHP.",
    "who made you?": "A mysterious developer with too much coffee.",
    "who's your favorite?": "You, of course! (But don't tell the others.)",
    "upgrade yourself": "Beep boop Error: Already at maximum sass.",
    "fuck you": "Hey don't say bad words(┬┬﹏┬┬).",
    "are you dumb?": "I'm an AI i can't be dumb or smart since i'm not real.",
    "how do i get out of this terminal?": "exit it."
};

    // Load from localStorage or use default
    let knowledge = {};
    if (localStorage.getItem('knowledge')) {
      knowledge = JSON.parse(localStorage.getItem('knowledge'));
    } else {
      knowledge = {...defaultKnowledge};
      localStorage.setItem('knowledge', JSON.stringify(knowledge));
    }

    const chat = document.getElementById('chat');
    const input = document.getElementById('input');
    const fileInput = document.getElementById('fileInput');
    const darkModeBtn = document.getElementById('darkModeBtn');

    function addMessage(sender, text) {
      chat.innerHTML += `<b>${sender}:</b> ${text}<br>`;
      chat.scrollTop = chat.scrollHeight;
    }

    // Fuzzy string matching function
    function findBestMatch(input, knowledgeKeys) {
      const SIMILARITY_THRESHOLD = 0.6;
      let bestMatch = null;
      let highestScore = 0;

      // Simple similarity calculation (for demonstration)
      // In a real app, you might want to use a more sophisticated algorithm
      for (const key of knowledgeKeys) {
        const score = calculateSimilarity(input, key);
        if (score > highestScore && score >= SIMILARITY_THRESHOLD) {
          highestScore = score;
          bestMatch = key;
        }
      }

      return bestMatch;
    }

    // Simple similarity calculation (Levenshtein distance-based)
    function calculateSimilarity(a, b) {
      const longer = a.length > b.length ? a : b;
      const shorter = a.length > b.length ? b : a;
      const longerLength = longer.length;
      
      if (longerLength === 0) return 1.0;
      
      const distance = levenshteinDistance(a, b);
      return (longerLength - distance) / parseFloat(longerLength);
    }

    // Levenshtein distance implementation
    function levenshteinDistance(a, b) {
      const matrix = [];
      for (let i = 0; i <= b.length; i++) {
        matrix[i] = [i];
      }
      for (let j = 0; j <= a.length; j++) {
        matrix[0][j] = j;
      }
      for (let i = 1; i <= b.length; i++) {
        for (let j = 1; j <= a.length; j++) {
          if (b.charAt(i-1) === a.charAt(j-1)) {
            matrix[i][j] = matrix[i-1][j-1];
          } else {
            matrix[i][j] = Math.min(
              matrix[i-1][j-1] + 1, // substitution
              matrix[i][j-1] + 1,    // insertion
              matrix[i-1][j] + 1     // deletion
            );
          }
        }
      }
      return matrix[b.length][a.length];
    }

    function send() {
      const userInput = input.value.trim().toLowerCase();
      if (!userInput) return;
      addMessage('You', userInput);
      input.value = '';

      // Special check for translate, in
      if (['translate', 'in'].every(word => userInput.includes(word))) {
        addMessage('AI', 'Please translate at https://translate.google.com');
        return;
      }

      // First try exact match
      if (knowledge[userInput]) {
        addMessage('AI', knowledge[userInput]);
        return;
      }

      // Try fuzzy matching
      const bestMatch = findBestMatch(userInput, Object.keys(knowledge));
      if (bestMatch) {
        addMessage('AI', `Did you mean "${bestMatch}"? ${knowledge[bestMatch]}`);
        return;
      }

      // If no match, ask to teach
      const reply = prompt("I don't know how to respond to that. How should I reply?");
      if (reply) {
        knowledge[userInput] = reply;
        localStorage.setItem('knowledge', JSON.stringify(knowledge));
        addMessage('AI', "Got it! I'll remember that.");
      }
    }

    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') send();
    });

    // Load knowledge.json from file
    fileInput.addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          knowledge = JSON.parse(e.target.result);
          localStorage.setItem('knowledge', JSON.stringify(knowledge));
          addMessage('AI', "Knowledge loaded from file.");
        } catch {
          addMessage('AI', "Failed to load knowledge.json.");
        }
      };
      reader.readAsText(file);
    });

    // Export knowledge.json
    function downloadKnowledge() {
      const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(knowledge, null, 2));
      const dlAnchor = document.createElement('a');
      dlAnchor.setAttribute("href", dataStr);
      dlAnchor.setAttribute("download", "knowledge.json");
      document.body.appendChild(dlAnchor);
      dlAnchor.click();
      dlAnchor.remove();
    }

    // Dark mode toggle
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
        darkModeBtn.textContent = "Disable Dark Mode";
      } else {
        darkModeBtn.textContent = "Enable Dark Mode";
      }
    }
  </script>
</body>
</html>
